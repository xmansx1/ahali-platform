{% extends "core/base.html" %}
{% block title %}Ø¯ÙØ¹ Ù…Ø³ØªØ­Ù‚Ø§Øª Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto p-4 bg-white rounded-xl shadow-md">
  <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">ğŸ’³ Ø¯ÙØ¹ Ù…Ø³ØªØ­Ù‚Ø§Øª Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨</h2>

  {% if messages %}
    <div class="space-y-3 mb-6">
      {% for message in messages %}
        <div class="p-3 rounded text-sm font-medium shadow-sm 
                    {% if message.tags == 'success' %} bg-green-100 text-green-800 border border-green-200
                    {% elif message.tags == 'error' %} bg-red-100 text-red-700 border border-red-200
                    {% else %} bg-gray-100 text-gray-700 border border-gray-200
                    {% endif %}">
          {{ message }}
        </div>
      {% endfor %}
    </div>
  {% endif %}

  {% if orders %}
    <div class="space-y-6">
      {% for order in orders %}
        <form method="post" class="bg-gray-50 border border-gray-200 p-5 rounded-xl shadow-sm space-y-4">
          {% csrf_token %}
          <input type="hidden" name="order_id" value="{{ order.id }}">

          <!-- ğŸ§¾ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨ -->
          <div class="grid sm:grid-cols-2 gap-4 text-sm text-gray-800">
            <div>
              <p><strong>ğŸ‘¤ Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨:</strong> {{ order.assigned_to.get_full_name|default:order.assigned_to.username }}</p>
              <p><strong>ğŸ“ Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„:</strong> {{ order.assigned_to.phone_number }}</p>
            </div>
            <div>
              <p><strong>ğŸ’µ Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„:</strong> {{ order.delivery_fee }} Ø±ÙŠØ§Ù„</p>
              <p><strong>â° ÙˆÙ‚Øª Ø§Ù„ØªØ³Ù„ÙŠÙ…:</strong>
                {% if order.delivered_at %}
                  {{ order.delivered_at|date:"Y-m-d H:i" }}
                {% else %}
                  <span class="text-gray-400">ØºÙŠØ± Ù…ØªÙˆÙØ±</span>
                {% endif %}
              </p>
            </div>
          </div>

          <!-- âœ… Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø¯ÙØ¹ -->
          <div class="flex flex-col sm:flex-row gap-3 items-start sm:items-center">
            <select name="payment_method" required class="border border-gray-300 rounded px-3 py-2 text-sm w-full sm:w-auto">
              <option value="">Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</option>
              <option value="cash">ğŸ’µ ÙƒØ§Ø´</option>
              <option value="transfer">ğŸ¦ ØªØ­ÙˆÙŠÙ„</option>
            </select>
            <button type="submit" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded text-sm shadow">
              âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹
            </button>
          </div>
        </form>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-center text-gray-500 mt-10 text-sm">ğŸ‘ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø¨Ø­Ø§Ø¬Ø© Ù„Ù„Ø¯ÙØ¹ Ø­Ø§Ù„ÙŠØ§Ù‹.</p>
  {% endif %}
</div>
{% endblock %}
