{% extends "core/base.html" %}
{% block title %}Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto px-4 py-6 bg-white rounded-xl shadow">

  <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† -->
  <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">
    ğŸ“„ Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª Ù„Ù„Ù…Ù†Ø¯ÙˆØ¨ÙŠÙ†
  </h2>

  <!-- ÙÙ„ØªØ±Ø© -->
  <form method="get" class="flex flex-wrap gap-4 items-end mb-6">
    <div>
      <label class="text-sm text-gray-600 mb-1 block">ğŸ“… Ù…Ù† ØªØ§Ø±ÙŠØ®</label>
      <input type="date" name="from_date" value="{{ from_date }}" class="border rounded px-3 py-2 text-sm">
    </div>
    <div>
      <label class="text-sm text-gray-600 mb-1 block">ğŸ“… Ø¥Ù„Ù‰ ØªØ§Ø±ÙŠØ®</label>
      <input type="date" name="to_date" value="{{ to_date }}" class="border rounded px-3 py-2 text-sm">
    </div>
    <div>
      <label class="text-sm text-gray-600 mb-1 block">ğŸ§â€â™‚ï¸ Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨</label>
      <select name="delivery_id" class="border rounded px-3 py-2 text-sm">
        <option value="">Ø§Ù„ÙƒÙ„</option>
        {% for user in delivery_users %}
          <option value="{{ user.id }}" {% if user.id|stringformat:"s" == selected_delivery_id %}selected{% endif %}>{{ user.get_full_name }}</option>
        {% endfor %}
      </select>
    </div>
    <button type="submit" class="bg-blue-600 text-white text-sm px-4 py-2 rounded-lg hover:bg-blue-700 transition">
      ğŸ” ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„ØªØ±
    </button>
  </form>

  <!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª -->
  {% if payments %}
    <div class="overflow-x-auto">
      <table class="w-full text-sm text-gray-800 border border-gray-200 rounded-lg">
        <thead class="bg-gray-100 text-gray-700 font-medium">
          <tr>
            <th class="px-4 py-2 text-right">#</th>
            <th class="px-4 py-2 text-right">Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨</th>
            <th class="px-4 py-2 text-right">Ù…Ø¨Ù„Øº Ø§Ù„Ø¯ÙØ¹</th>
            <th class="px-4 py-2 text-right">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</th>
            <th class="px-4 py-2 text-right">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¯ÙØ¹</th>
          </tr>
        </thead>
        <tbody>
          {% for payment in payments %}
            <tr class="border-t">
              <td class="px-4 py-2">{{ forloop.counter }}</td>
              <td class="px-4 py-2">{{ payment.paid_to.get_full_name }}</td>
              <td class="px-4 py-2">{{ payment.amount }} Ø±ÙŠØ§Ù„</td>
              <td class="px-4 py-2">{{ payment.get_payment_method_display }}</td>
              <td class="px-4 py-2">{{ payment.paid_at|date:"Y-m-d H:i" }}</td>
            </tr>
          {% endfor %}
        </tbody>
        <tfoot class="bg-gray-100 font-semibold">
          <tr>
            <td colspan="2" class="px-4 py-2 text-right">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</td>
            <td colspan="3" class="px-4 py-2 text-right text-green-700">{{ total_paid }} Ø±ÙŠØ§Ù„</td>
          </tr>
        </tfoot>
      </table>
    </div>
  {% else %}
    <p class="text-gray-500 text-sm text-center mt-10">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¯ÙÙˆØ¹Ø§Øª Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„ÙÙ„Ø§ØªØ±.</p>
  {% endif %}
</div>
{% endblock %}
