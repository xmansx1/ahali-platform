{% extends "core/base.html" %}
{% block title %}ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…ØªØ¬Ø±{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto bg-white rounded-xl shadow p-6">
  <h2 class="text-2xl font-bold text-gray-800 mb-6 border-b pb-2">ğŸª ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…ØªØ¬Ø±</h2>

  <ul class="text-sm space-y-3 text-gray-700">
    <li><strong>ğŸ‘¤ Ø§Ø³Ù… Ø§Ù„ØªØ§Ø¬Ø±:</strong> {{ user.username }}</li>
    <li><strong>ğŸ“ Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„:</strong> {{ user.phone_number|default:"-" }}</li>
    <li><strong>ğŸ“ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</strong> {{ user.store_location|default:"ØºÙŠØ± Ù…Ø­Ø¯Ø¯" }}</li>
    <li><strong>ğŸ§­ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª:</strong>
      {% if user.store_latitude and user.store_longitude %}
        {{ user.store_latitude }}, {{ user.store_longitude }}
      {% else %}
        <span class="text-red-500">ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©</span>
      {% endif %}
    </li>
  </ul>

  <!-- âœ… Ø§Ù„Ø®Ø±ÙŠØ·Ø© -->
  {% if user.store_latitude and user.store_longitude %}
  <div class="mt-6">
    <label class="block mb-2 text-sm font-medium text-gray-700">ğŸ—ºï¸ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…ØªØ¬Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</label>
    <div id="map" class="h-72 rounded border shadow"></div>
  </div>
  {% endif %}

  <!-- âœ… Ø²Ø± Ø±Ø¬ÙˆØ¹ -->
  <div class="mt-8">
    <a href="{% url 'admin_stores' %}" class="bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded">
      ğŸ”™ Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø§Ù„Ù…ØªØ§Ø¬Ø±
    </a>
  </div>
</div>
{% endblock %}

{% block extra_scripts %}
  {% if user.store_latitude and user.store_longitude %}
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const lat = {{ user.store_latitude }};
      const lng = {{ user.store_longitude }};
      const map = L.map("map").setView([lat, lng], 15);
      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution: '&copy; OpenStreetMap contributors'
      }).addTo(map);
      L.marker([lat, lng]).addTo(map)
        .bindPopup("ğŸ“ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…ØªØ¬Ø±").openPopup();
    });
  </script>
  {% endif %}
{% endblock %}
