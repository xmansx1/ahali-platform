{% extends "core/base.html" %}
{% block title %}Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØªØ§Ø¬Ø±{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto bg-white rounded-xl shadow p-6">
  <h2 class="text-2xl font-bold text-gray-800 mb-4 border-b pb-2">ğŸ’¼ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØªØ§Ø¬Ø±</h2>

  <!-- âœ… Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¨Ø­Ø« -->
  <form method="get" class="flex flex-wrap items-end gap-4 mb-6">
    <div>
      <label class="block text-sm mb-1">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ Ø§Ù„Ù…ØªØ¬Ø±</label>
      <input type="text" name="q" value="{{ search_query }}" class="border rounded px-3 py-2 w-64" placeholder="Ù…Ø«Ø§Ù„: ahmed Ø£Ùˆ Ø­ÙŠ Ø§Ù„ÙŠØ§Ø³Ù…ÙŠÙ†">
    </div>
    <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">ğŸ” Ø¨Ø­Ø«</button>
  </form>

  <!-- âœ… Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ØªØ§Ø¬Ø± -->
  <table class="w-full border text-sm">
    <thead class="bg-gray-100 text-right">
      <tr>
        <th class="p-2">Ø§Ø³Ù… Ø§Ù„ØªØ§Ø¬Ø±</th>
        <th class="p-2">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</th>
        <th class="p-2">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…ØªØ¬Ø±</th>
        <th class="p-2">Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª</th>
        <th class="p-2">Ø§Ù„ØªØ­ÙƒÙ…</th>
      </tr>
    </thead>
    <tbody>
      {% for user in merchants %}
        <tr class="border-t hover:bg-gray-50">
          <td class="p-2">{{ user.username }}</td>
          <td class="p-2">{{ user.phone_number }}</td>
          <td class="p-2">{{ user.store_location|default:"-" }}</td>
          <td class="p-2">
            {% if user.store_latitude and user.store_longitude %}
              {{ user.store_latitude }}, {{ user.store_longitude }}
            {% else %}-{% endif %}
          </td>
          <td class="p-2">
            <a href="{% url 'admin_store_detail' user.id %}" class="text-blue-600 hover:underline">ğŸ” Ø¹Ø±Ø¶</a>
          </td>
        </tr>
      {% empty %}
        <tr><td colspan="5" class="text-center text-gray-500 p-4">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ØªØ§Ø¬Ø± Ù…Ø·Ø§Ø¨Ù‚Ø©.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
