{% extends "core/base.html" %}
{% block title %}Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØªØ§Ø¬Ø±{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto bg-white rounded-xl shadow p-6">
  <!-- âœ… Ø§Ù„Ø¹Ù†ÙˆØ§Ù† -->
  <div class="flex items-center justify-between mb-6 border-b pb-4">
    <h2 class="text-2xl font-bold text-gray-800 flex items-center gap-2">
      ğŸª Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØªØ§Ø¬Ø±
    </h2>
  </div>

  <!-- ğŸ” Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¨Ø­Ø« -->
  <form method="get" class="flex flex-col sm:flex-row sm:items-end sm:gap-4 gap-3 mb-8">
    <div class="w-full sm:w-72">
      <label class="block text-sm font-medium text-gray-700 mb-1">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ Ø§Ù„Ù…ØªØ¬Ø±</label>
      <input type="text" name="q" value="{{ search_query }}"
             class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500"
             placeholder="Ù…Ø«Ø§Ù„: ahmed Ø£Ùˆ Ø­ÙŠ Ø§Ù„ÙŠØ§Ø³Ù…ÙŠÙ†">
    </div>
    <div>
      <button type="submit"
              class="bg-green-600 hover:bg-green-700 text-white font-medium px-5 py-2.5 rounded-lg transition shadow">
        ğŸ” Ø¨Ø­Ø«
      </button>
    </div>
  </form>

  <!-- ğŸ§¾ Ø¬Ø¯ÙˆÙ„ Ø¹Ø±Ø¶ Ø§Ù„Ù…ØªØ§Ø¬Ø± -->
  <div class="overflow-x-auto">
    <table class="min-w-full text-sm text-right border border-gray-200 rounded-lg overflow-hidden shadow-sm">
      <thead class="bg-gray-100 text-gray-700 font-semibold text-sm">
        <tr>
          <th class="px-4 py-3">Ø§Ø³Ù… Ø§Ù„ØªØ§Ø¬Ø±</th>
          <th class="px-4 py-3">Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø±</th>
          <th class="px-4 py-3">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</th>
          <th class="px-4 py-3">Ù†ÙˆØ¹ Ø§Ù„Ù…ØªØ¬Ø±</th>
          <th class="px-4 py-3">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th>
          <th class="px-4 py-3">Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª</th>
          <th class="px-4 py-3">Ù…ØªØ§Ø­ØŸ</th>
          <th class="px-4 py-3">Ø§Ù„ØªØ­ÙƒÙ…</th>
        </tr>
      </thead>
      <tbody class="text-gray-800">
        {% for store in stores %}
          <tr class="border-t hover:bg-gray-50 transition">
            <td class="px-4 py-3">{{ store.user.get_full_name|default:store.user.username }}</td>
            <td class="px-4 py-3">{{ store.name|default:"-" }}</td>
            <td class="px-4 py-3">{{ store.phone|default:"-" }}</td>
            <td class="px-4 py-3">{{ store.get_store_type_display }}</td>
            <td class="px-4 py-3">{{ store.address|default:"-" }}</td>
            <td class="px-4 py-3 text-gray-600">
              {% if store.latitude and store.longitude %}
                <span class="text-xs">{{ store.latitude }}, {{ store.longitude }}</span>
              {% else %}
                <span class="text-gray-400">-</span>
              {% endif %}
            </td>
            <td class="px-4 py-3 font-semibold">
              {% if store.is_available %}
                <span class="text-green-600">Ù†Ø¹Ù…</span>
              {% else %}
                <span class="text-red-600">Ù„Ø§</span>
              {% endif %}
            </td>
            <td class="px-4 py-3 whitespace-nowrap">
              <a href="{% url 'admin_store_detail' store.id %}"
                 class="text-blue-600 hover:underline mr-1">ğŸ” Ø¹Ø±Ø¶</a>
              |
              <a href="{% url 'admin_store_edit' store.id %}"
                 class="text-yellow-600 hover:underline ml-1">âœï¸ ØªØ¹Ø¯ÙŠÙ„</a>
            </td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="8" class="text-center text-gray-500 py-6">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ØªØ§Ø¬Ø± Ù…Ø·Ø§Ø¨Ù‚Ø©.</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
