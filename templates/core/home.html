{% extends 'core/base.html' %} {% load static %} {% block content %}
<div class="space-y-24">
  <!-- 🟦 ترحيب -->
  <section
    class="bg-gradient-to-br from-blue-50 to-white text-center py-20 px-4 sm:px-8 rounded-xl shadow"
  >
    <h1 class="text-5xl font-extrabold text-gray-800 mb-4">
      أهلاً بكم في <span class="text-blue-600">منصة أهالي الحي</span> 👋
    </h1>
    <p class="text-lg text-gray-600 max-w-2xl mx-auto mb-8">
      منصة مخصصة لأهالي حي <strong>تنال</strong> لتسهيل الطلب من المتاجر
      المحلية، متابعة الإعلانات، ومعرفة أخبار الحي.
    </p>
    <div class="flex flex-col sm:flex-row justify-center gap-4 flex-wrap">
      <a
        href="{% url 'login' %}"
        class="px-8 py-3 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition"
      >
        🔐 تسجيل الدخول
      </a>
      <a
        href="{% url 'public_store_browser' %}"
        class="px-8 py-3 bg-green-600 text-white rounded-lg shadow hover:bg-green-700 transition"
      >
        🛍️ المتاجر المتاحة الآن
      </a>
      <a
        href="#features"
        class="px-8 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition"
      >
        📌 استكشاف المميزات
      </a>
    </div>
  </section>

  <!-- 💡 مميزات المنصة -->
  <section id="features" class="max-w-7xl mx-auto px-4 sm:px-8">
    <h2 class="text-3xl font-bold text-center text-gray-800 mb-12">
      ✨ ماذا تقدم المنصة؟
    </h2>
    <div
      class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 text-center"
    >
      <div class="bg-white p-6 rounded-2xl shadow hover:shadow-lg transition">
        <h3 class="text-xl font-semibold text-blue-700 mb-2">🛒 متاجر قريبة</h3>
        <p class="text-gray-600">تصفح واطلب من متاجر حي تنال بسهولة.</p>
      </div>
      <div class="bg-white p-6 rounded-2xl shadow hover:shadow-lg transition">
        <h3 class="text-xl font-semibold text-green-700 mb-2">
          🚚 مناديب محليون
        </h3>
        <p class="text-gray-600">توصيل سريع وآمن داخل الحي.</p>
      </div>
      <div class="bg-white p-6 rounded-2xl shadow hover:shadow-lg transition">
        <h3 class="text-xl font-semibold text-yellow-600 mb-2">
          📢 إعلانات مميزة
        </h3>
        <p class="text-gray-600">إعلانات مخصصة لسكان الحي فقط.</p>
      </div>
      <div class="bg-white p-6 rounded-2xl shadow hover:shadow-lg transition">
        <h3 class="text-xl font-semibold text-purple-600 mb-2">
          ⚡ خدمة سريعة
        </h3>
        <p class="text-gray-600">استجابة مباشرة وتنفيذ فوري لطلباتك.</p>
      </div>
    </div>
  </section>

  <!-- 📢 الإعلانات المميزة -->
  {% if ads %}
  <section class="max-w-7xl mx-auto px-4 sm:px-8 py-12">
    <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">
      📢 إعلانات الحي
    </h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {% for ad in ads %}
      <div
        onclick="openAdModal({{ ad.id }})"
        class="cursor-pointer bg-white rounded-2xl shadow hover:shadow-lg transition overflow-hidden"
      >
        <div class="relative h-48 w-full">
          {% if ad.image %}
          <img
            src="{{ ad.image.url }}"
            alt="{{ ad.title }}"
            class="object-cover w-full h-full transition-transform duration-300 hover:scale-105"
          />
          {% else %}
          <div
            class="bg-gray-200 w-full h-full flex items-center justify-center text-gray-500"
          >
            لا توجد صورة
          </div>
          {% endif %}
        </div>
        <div class="p-4 text-center">
          <h3 class="text-lg font-semibold text-gray-800">{{ ad.title }}</h3>
          <p class="mt-2 text-gray-600 text-sm">
            {{ ad.text|truncatechars:60 }}
          </p>
          <div class="mt-4">
            <span
              class="inline-block px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition"
            >
              عرض الإعلان
            </span>
          </div>
        </div>
      </div>

      <!-- 💬 نافذة الإعلان المنبثقة -->
      <div
        id="ad-modal-{{ ad.id }}"
        class="hidden fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center"
      >
        <div
          onclick="event.stopPropagation()"
          class="bg-white rounded-xl max-w-lg w-full p-6 relative animate-fade-in"
        >
          <button
            onclick="closeAdModal({{ ad.id }})"
            class="absolute top-3 left-3 text-gray-400 hover:text-red-600 text-2xl"
          >
            &times;
          </button>

          {% if ad.image %}
          <img
            src="{{ ad.image.url }}"
            alt="{{ ad.title }}"
            class="rounded-lg mb-4 w-full max-h-[60vh] object-contain mx-auto"
          />
          {% endif %}

          <h3 class="text-xl font-bold text-gray-800 mb-2">{{ ad.title }}</h3>
          <p class="text-gray-600 mb-4">{{ ad.text|linebreaks }}</p>

          {% if ad.link %}
          <a
            href="{{ ad.link }}"
            target="_blank"
            class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg"
          >
            🌐 زيارة الرابط
          </a>
          {% endif %}
        </div>
      </div>

      {% endfor %}
    </div>
  </section>
  {% endif %}
</div>

<!-- 🧠 Scripts -->
<script>
  function openAdModal(id) {
    document.getElementById(`ad-modal-${id}`).classList.remove("hidden");
  }

  function closeAdModal(id) {
    document.getElementById(`ad-modal-${id}`).classList.add("hidden");
  }

  document.addEventListener("click", function (e) {
    const modals = document.querySelectorAll('[id^="ad-modal-"]');
    modals.forEach((modal) => {
      if (!modal.classList.contains("hidden") && e.target === modal) {
        modal.classList.add("hidden");
      }
    });
  });
</script>

<!-- 💫 Fade-in Animation -->
<style>
  .animate-fade-in {
    animation: fadeIn 0.3s ease-out;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
{% endblock %}
