{% extends "core/base.html" %}
{% block title %}إعدادات المندوب{% endblock %}

{% block content %}
<div class="max-w-xl mx-auto bg-white p-6 rounded-xl shadow-md">
  <h2 class="text-2xl font-bold text-gray-800 mb-6 border-b pb-2">⚙️ إعدادات المندوب</h2>

  {% if messages %}
    {% for msg in messages %}
      <div class="text-sm p-3 rounded mb-4 {% if msg.tags == 'success' %}bg-green-100 text-green-700{% else %}bg-red-100 text-red-700{% endif %}">
        {{ msg }}
      </div>
    {% endfor %}
  {% endif %}

  <!-- ✅ نموذج تحديث البيانات -->
  <form method="POST" class="space-y-4 mb-8">
    {% csrf_token %}
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">📱 رقم الجوال</label>
      <input type="text" name="phone_number" value="{{ form.phone_number.value }}" class="w-full border rounded px-3 py-2 text-sm" required>
    </div>

    <button name="save_settings" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded text-sm font-medium">
      💾 حفظ التغييرات
    </button>
  </form>

  <!-- ✅ نموذج تغيير كلمة المرور -->
  <h3 class="text-lg font-semibold text-gray-800 mb-2">🔒 تغيير كلمة المرور</h3>
  <form method="POST" class="space-y-4">
    {% csrf_token %}
    <div>
      <label class="block text-sm mb-1 text-gray-700">كلمة المرور الحالية</label>
      <input type="password" name="old_password" class="w-full border rounded px-3 py-2 text-sm" required>
    </div>

    <div>
      <label class="block text-sm mb-1 text-gray-700">كلمة المرور الجديدة</label>
      <input type="password" name="new_password" class="w-full border rounded px-3 py-2 text-sm" required>
    </div>

    <div>
      <label class="block text-sm mb-1 text-gray-700">تأكيد كلمة المرور الجديدة</label>
      <input type="password" name="confirm_password" class="w-full border rounded px-3 py-2 text-sm" required>
    </div>

    <button name="change_password" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm font-medium">
      🔐 تحديث كلمة المرور
    </button>
  </form>
</div>
{% endblock %}
